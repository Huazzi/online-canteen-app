/* empty css             *//* empty css                  */import{r as c}from"./request-54d9b062.js";/* empty css              *//* empty css              *//* empty css                 *//* empty css             *//* empty css                    *//* empty css                */import{_ as N,r as I,a as P,o as u,c as i,b as S,d as o,w as t,O as h,f as d,g as _,y as w,C as m,i as B,N as C,M as R,G as F,P as M,Q as O,D}from"./index-fdd1b0eb.js";const G={style:{width:"50%"}},J={class:"card"},q=["src"],A={__name:"Person",emits:["updateUser"],setup(Q,{emit:f}){const e=I({user:JSON.parse(localStorage.getItem("canteen-user")||"{}")}),V=s=>{e.user.avatar=s.data},v=f,y=()=>{e.user.role==="ADMIN"?c.put("/admin/update",e.user).then(s=>{s.code==="200"?m.success("更新成功"):m.error(s.msg)}):c.put("/user/update",e.user).then(s=>{s.code==="200"?m.success("更新成功"):m.error(s.msg)}),localStorage.setItem("canteen-user",JSON.stringify(e.user)),v("updateUser")};return(s,l)=>{const g=P("Plus"),E=B,b=C,r=R,n=F,p=M,U=O,x=D,k=h;return u(),i("div",G,[S("div",J,[o(k,{model:e.user,"label-width":"100px",style:{"padding-right":"50px"}},{default:t(()=>[o(r,{label:"头像"},{default:t(()=>[o(b,{"show-file-list":!1,class:"avatar-uploader",action:"http://localhost:9090/files/upload","on-success":V},{default:t(()=>[e.user.avatar?(u(),i("img",{key:0,src:e.user.avatar,class:"avatar",alt:"'图片加载失败'"},null,8,q)):(u(),d(E,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[o(g)]),_:1}))]),_:1})]),_:1}),o(r,{label:"账号"},{default:t(()=>[o(n,{disabled:"",modelValue:e.user.username,"onUpdate:modelValue":l[0]||(l[0]=a=>e.user.username=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(r,{label:"名称"},{default:t(()=>[o(n,{modelValue:e.user.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.user.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e.user.role==="USER"?(u(),d(r,{key:0,label:"性别"},{default:t(()=>[o(U,{modelValue:e.user.sex,"onUpdate:modelValue":l[2]||(l[2]=a=>e.user.sex=a)},{default:t(()=>[o(p,{label:"男"}),o(p,{label:"女"})]),_:1},8,["modelValue"])]),_:1})):_("",!0),e.user.role==="USER"?(u(),d(r,{key:1,label:"手机"},{default:t(()=>[o(n,{modelValue:e.user.phone,"onUpdate:modelValue":l[3]||(l[3]=a=>e.user.phone=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})):_("",!0),e.user.role==="USER"?(u(),d(r,{key:2,label:"余额"},{default:t(()=>[o(n,{readonly:"",modelValue:e.user.account,"onUpdate:modelValue":l[4]||(l[4]=a=>e.user.account=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})):_("",!0),o(r,null,{default:t(()=>[o(x,{type:"primary",onClick:y},{default:t(()=>[w("保存")]),_:1})]),_:1})]),_:1},8,["model"])])])}}},$=N(A,[["__scopeId","data-v-9358699c"]]);export{$ as default};
