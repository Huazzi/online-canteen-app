/* empty css             *//* empty css                     *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                   *//* empty css              *//* empty css                  *//* empty css               *//* empty css               *//* empty css                */import{r as f}from"./request-54d9b062.js";/* empty css                    */import{r as z,o as c,c as _,b as g,d as t,w as o,g as b,G as D,D as B,H as P,I as T,J as O,y as m,C as u,K as F,L as I,M as J,N as M,O as $}from"./index-fdd1b0eb.js";const q={class:"card",style:{"margin-bottom":"10px"}},A={class:"card",style:{"margin-bottom":"10px"}},G=["src"],H={key:0,class:"card"},K={class:"dialog-footer"},me={__name:"Admin",setup(L){const e=z({tableData:[],total:0,pageNum:1,pageSize:5,formVisible:!1,form:{},name:""}),s=()=>{f.get("/admin/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(n=>{var a;e.tableData=((a=n.data)==null?void 0:a.list)||[],e.total=n.data.total})};s();const y=()=>{e.name=null,s()},V=()=>{f.request({method:e.form.id?"PUT":"POST",url:e.form.id?"/admin/update":"/admin/add",data:e.form}).then(n=>{n.code==="200"?(u.success("操作成功"),e.formVisible=!1,s()):u.error(n.msg)})},h=n=>{e.form=JSON.parse(JSON.stringify(n)),e.formVisible=!0},x=n=>{F.confirm("删除后数据无法恢复，您确认删除吗？","确认删除",{type:"warning"}).then(a=>{f.delete("/admin/delete/"+n).then(d=>{d.code==="200"?(u.success("操作成功"),s()):u.error(d.msg)})}).catch(a=>{console.log(a)})},w=n=>{e.form.avatar=n.data};function C(){window.open("http://localhost:9090/admin/export")}return(n,a)=>{const d=D,r=B,i=I,k=P,v=T,p=J,E=M,N=$,U=O;return c(),_("div",null,[g("div",q,[t(d,{"prefix-icon":"Search",style:{width:"300px","margin-right":"10px"},placeholder:"请输入名称查询",modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=l=>e.name=l)},null,8,["modelValue"]),t(r,{type:"primary",onClick:s},{default:o(()=>[m("查询")]),_:1}),t(r,{type:"info",style:{margin:"0 10px"},onClick:y},{default:o(()=>[m("重置")]),_:1}),t(r,{type:"warning",onClick:C},{default:o(()=>[m("一键导出")]),_:1})]),g("div",A,[t(k,{data:e.tableData,style:{width:"100%"}},{default:o(()=>[t(i,{prop:"id",label:"序号",width:"70"}),t(i,{prop:"username",label:"账号"}),t(i,{prop:"name",label:"昵称"}),t(i,{prop:"avatar",label:"头像"},{default:o(l=>[l.row.avatar?(c(),_("img",{key:0,src:l.row.avatar,alt:"",style:{width:"50px",height:"50px","border-radius":"50%"}},null,8,G)):b("",!0)]),_:1}),t(i,{prop:"phone",label:"联系电话"}),t(i,{label:"操作",width:"180"},{default:o(l=>[t(r,{type:"primary",onClick:S=>h(l.row)},{default:o(()=>[m("编辑")]),_:2},1032,["onClick"]),t(r,{type:"danger",onClick:S=>x(l.row.id)},{default:o(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(c(),_("div",H,[t(v,{background:"",layout:"prev, pager, next",onCurrentChange:s,"page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":a[1]||(a[1]=l=>e.pageNum=l),total:e.total},null,8,["page-size","current-page","total"])])):b("",!0),t(U,{modelValue:e.formVisible,"onUpdate:modelValue":a[6]||(a[6]=l=>e.formVisible=l),title:"管理员信息",width:"40%","destroy-on-close":""},{footer:o(()=>[g("span",K,[t(r,{onClick:a[5]||(a[5]=l=>e.formVisible=!1)},{default:o(()=>[m("取消")]),_:1}),t(r,{type:"primary",onClick:V},{default:o(()=>[m("保存")]),_:1})])]),default:o(()=>[t(N,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:o(()=>[t(p,{label:"账号"},{default:o(()=>[t(d,{modelValue:e.form.username,"onUpdate:modelValue":a[2]||(a[2]=l=>e.form.username=l),autocomplete:"off",disabled:!!e.form.id},null,8,["modelValue","disabled"])]),_:1}),t(p,{label:"昵称"},{default:o(()=>[t(d,{modelValue:e.form.name,"onUpdate:modelValue":a[3]||(a[3]=l=>e.form.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(p,{label:"头像"},{default:o(()=>[t(E,{action:"http://localhost:9090/files/upload","on-success":w},{default:o(()=>[t(r,{type:"primary"},{default:o(()=>[m("点击上传")]),_:1})]),_:1})]),_:1}),t(p,{label:"联系电话"},{default:o(()=>[t(d,{modelValue:e.form.phone,"onUpdate:modelValue":a[4]||(a[4]=l=>e.form.phone=l),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{me as default};
