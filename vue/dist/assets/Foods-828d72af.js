/* empty css             *//* empty css                     *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                   *//* empty css              *//* empty css                  *//* empty css               *//* empty css               *//* empty css                *//* empty css                     */import{r as f}from"./request-54d9b062.js";/* empty css                    */import{r as D,o as _,c as g,b as u,d as o,w as l,g as b,G as P,D as T,H as F,I,J as O,y as s,f as J,C as c,K as M,L as $,Y as q,M as A,N as G,O as H}from"./index-fdd1b0eb.js";const K={class:"card",style:{"margin-bottom":"10px"}},L={class:"card",style:{"margin-bottom":"10px"}},Y={style:{"margin-bottom":"10px"}},j={key:0,class:"card"},Q={class:"dialog-footer"},ue={__name:"Foods",setup(R){const e=D({tableData:[],total:0,pageNum:1,pageSize:5,formVisible:!1,form:{},name:""}),d=()=>{f.get("/foods/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(r=>{var t;e.tableData=((t=r.data)==null?void 0:t.list)||[],e.total=r.data.total})};d();const y=()=>{e.name=null,d()},V=()=>{e.form={},e.formVisible=!0},w=()=>{f.request({method:e.form.id?"PUT":"POST",url:e.form.id?"/foods/update":"/foods/add",data:e.form}).then(r=>{r.code==="200"?(c.success("操作成功"),e.formVisible=!1,d()):c.error(r.msg)})},x=r=>{e.form=JSON.parse(JSON.stringify(r)),e.formVisible=!0},h=r=>{M.confirm("删除后数据无法恢复，您确认删除吗？","确认删除",{type:"warning"}).then(t=>{f.delete("/foods/delete/"+r).then(i=>{i.code==="200"?(c.success("操作成功"),d()):c.error(i.msg)})}).catch(t=>{console.log(t)})},k=r=>{e.form.img=r.data};function C(){window.open("http://localhost:9090/foods/export")}return(r,t)=>{const i=P,n=T,m=$,v=q,E=F,N=I,p=A,U=G,S=H,z=O;return _(),g("div",null,[u("div",K,[o(i,{"prefix-icon":"Search",style:{width:"300px","margin-right":"10px"},placeholder:"请输入餐品名称查询",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.name=a)},null,8,["modelValue"]),o(n,{type:"primary",onClick:d},{default:l(()=>[s("查询")]),_:1}),o(n,{type:"info",style:{margin:"0 10px"},onClick:y},{default:l(()=>[s("重置")]),_:1}),o(n,{type:"warning",onClick:C},{default:l(()=>[s("一键导出")]),_:1})]),u("div",L,[u("div",Y,[o(n,{type:"success",onClick:V},{default:l(()=>[s("新增")]),_:1})]),o(E,{data:e.tableData},{default:l(()=>[o(m,{prop:"id",label:"序号",width:"70"}),o(m,{prop:"name",label:"名称"}),o(m,{prop:"descr",label:"简介"}),o(m,{prop:"price",label:"价格"}),o(m,{label:"图片"},{default:l(a=>[a.row.img?(_(),J(v,{key:0,style:{width:"100px",height:"100px",display:"block"},src:a.row.img,"preview-src-list":[a.row.img],"preview-teleported":""},null,8,["src","preview-src-list"])):b("",!0)]),_:1}),o(m,{label:"操作",width:"180"},{default:l(a=>[o(n,{type:"primary",onClick:B=>x(a.row)},{default:l(()=>[s("编辑")]),_:2},1032,["onClick"]),o(n,{type:"danger",onClick:B=>h(a.row.id)},{default:l(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(_(),g("div",j,[o(N,{background:"",layout:"prev, pager, next",onCurrentChange:d,"page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=a=>e.pageNum=a),total:e.total},null,8,["page-size","current-page","total"])])):b("",!0),o(z,{modelValue:e.formVisible,"onUpdate:modelValue":t[6]||(t[6]=a=>e.formVisible=a),title:"信息",width:"40%","destroy-on-close":""},{footer:l(()=>[u("span",Q,[o(n,{onClick:t[5]||(t[5]=a=>e.formVisible=!1)},{default:l(()=>[s("取消")]),_:1}),o(n,{type:"primary",onClick:w},{default:l(()=>[s("保存")]),_:1})])]),default:l(()=>[o(S,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:l(()=>[o(p,{label:"名称"},{default:l(()=>[o(i,{modelValue:e.form.name,"onUpdate:modelValue":t[2]||(t[2]=a=>e.form.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(p,{label:"简介"},{default:l(()=>[o(i,{type:"textarea",modelValue:e.form.descr,"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.descr=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(p,{label:"价格"},{default:l(()=>[o(i,{modelValue:e.form.price,"onUpdate:modelValue":t[4]||(t[4]=a=>e.form.price=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(p,{label:"图片"},{default:l(()=>[o(U,{action:"http://localhost:9090/files/upload","on-success":k},{default:l(()=>[o(n,{type:"primary"},{default:l(()=>[s("点击上传")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{ue as default};
